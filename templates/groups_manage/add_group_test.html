{% extends "base.html" %}
  {% block content %}
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h1 class="page-header">Add Group</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Add Group
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <form>
                            <div class="form-group">
					            <input type="button" class="btn btn-default" onClick="CreateTB()" value="Add" />
					            <input type="button" class="btn btn-default" onClick="chkFun()" value="Invert Selection" />
					            <input type="button" class="btn btn-default" onClick="del('chk')" value="Del Selection" />
								<button>向页面发送 HTTP POST 请求，并获得返回的结果</button>
                            </div>
                            </form>
                            <form>
                            <div class="dataTable_wrapper">
                                <table class="table table-striped table-bordered table-hover" id="TB">
                                    <tr>
                                        <th width="50"><input type="checkbox" onClick="chk('all',this)" /></th>
                                        <th>Group Name</th>
                                        <th>Edit</th>
                                        <th>Delete</th>
                                    </tr>
                                     {% for group in list_groups %}
                                        <tr class="even gradeC">
                                            <td><input type='checkbox' name='ck'></td>
                                            <td><div>{{ group }}</div><input type='text' style='display:none; width:99%; height:22px; text-align:center;'></td>
                                            <td><input type='button' class='btn btn-success btn-xs' value='Edit' onclick=edit(this,'show')></td>
                                            <td><input type='button' class='btn btn-danger btn-xs' value='Delete' onclick='del(this,'{{ group }}')'></td>
                                        </tr>
                                        {% endfor %}
                                </table>
                            </div>
                            </form>
                            <!-- /.table-responsive -->
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /#page-wrapper -->

    <script type="text/javascript">

			//Create TR
			var i = 1;
			function CreateTB(){
				var oTB = document.getElementById("TB");
				var oTR = oTB.insertRow(oTB.rows.length);
				var oTD1 = oTR.insertCell(0);
				oTD1.innerHTML = "<input type='checkbox' name='ck'>";
				var oTD2 = oTR.insertCell(1);
				oTD2.innerHTML = "<div>default</div><input type='text' style='display:none; width:99%; height:22px; text-align:center;'>";
				var oTD4 = oTR.insertCell(2);
				oTD4.innerHTML = "<input type='button' class='btn btn-success btn-xs' value='Edit' onclick=\"edit(this,'show')\">";
				var oTD5 = oTR.insertCell(3);
				oTD5.innerHTML = "<input type='submit' class='btn btn-danger btn-xs' value='Delete' onclick='del(this)'>";
			i++;
			}

			//EDIT TR
			function edit(o,otype){
				var oTR=o.parentNode.parentNode;
				var oDiv1=oTR.cells[1].getElementsByTagName("div");
				var oDiv2=oTR.cells[2].getElementsByTagName("div");
				var oInpt1=oTR.cells[1].getElementsByTagName("input");
				var oInpt2=oTR.cells[2].getElementsByTagName("input");
				if (otype =="show"){
					o.value="Submit";
					o.setAttribute("onclick","edit(this,'hide')");
					//名字修改前
					oInpt1[0].value = oDiv1[0].childNodes[0].nodeValue;
					oInpt1[0].style.display = "block";
					oDiv1[0].style.display = "none";
					//年龄修改前
					oInpt2[0].value = oDiv2[0].childNodes[0].nodeValue;
					oInpt2[0].style.display = "block";
					oDiv2[0].style.display = "none";
				}else if (otype =="hide"){
					o.value="Edit";
					o.setAttribute("onclick","edit(this,'show')");
					//名字修改后
					oDiv1[0].childNodes[0].nodeValue = oInpt1[0].value;
					oDiv1[0].style.display = "block";
					oInpt1[0].style.display = "none";
					//年龄修改后
					oDiv2[0].childNodes[0].nodeValue = oInpt2[0].value;
					oDiv2[0].style.display = "block";
					oInpt2[0].style.display = "none";
				}

			}
			//Delete TR
			function del(o,oGroup){
				var oTB = document.getElementById("TB");
				var oInpt = oTB.getElementsByTagName("input");
				var oDiv = oTB.getElementsByTagName("div");
				if (o == 'chk')
				{
					for (var i=1; i<oInpt.length ; i++)
					{
						if (oInpt[i].type == 'checkbox' && oInpt[i].checked)
						{
							var oRow = oInpt[i].parentNode.parentNode.sectionRowIndex;
							oTB.deleteRow(oRow);
							i--;
						}
					}
				}else{
					var oDel = o.parentNode.parentNode.sectionRowIndex;
					//for (var i=1; i<oDiv.length ; i++)
					//{
					//	alert (oDiv[i].innerHTML)
					//}
					alert(oGroup.innerHTML)
					oTB.deleteRow(oDel);
                    alert(aFieldValue.join());
				}
			}

			//Check All
			function chk(type,o){
				var oInpt = document.getElementsByTagName("input");
				for (var i=0; i<oInpt.length; i++){
					if (oInpt[i].type == "checkbox"){
						oInpt[i].checked = o.checked;
					}
				}
			}

			//Check Fan
			function chkFun(){
				var oTB = document.getElementById("TB");
				var oInpt = oTB.getElementsByTagName("input");
				for (var i=1; i<oInpt.length; i++){
					if (oInpt[i].type == "checkbox"){
						if (oInpt[i].checked)
						{
							oInpt[i].checked = false;
						}else{
							oInpt[i].checked = true;
						}
					}
				}
			}
	</script>
<script src="/static/bower_components/jquery/dist/jquery.min.js"></script>

<script>
$(document).ready(function(){
  $("button").click(function(){
    $.post("../groups_manage/del_group/",
    {
      value:"SAX"
    },
    function(data,status){
      alert("数据：" + data + "\n状态：" + status);
    });
  });
});
</script>
    {% endblock %}
